const adConfig = {
    small: {
        text: {
            en: "C.L.I.P 2: AI PROJECT â€” TRY FIRST",
            es: "C.L.I.P 2: PROYECTO DE IA â€” PRUEBA PRIMERO",
            zh: "C.L.I.P 2ï¼šäººå·¥æ™ºèƒ½é¡¹ç›® â€” æŠ¢å…ˆä½“éªŒ",
            hi: "C.L.I.P 2: AI à¤ªà¤°à¤¿à¤¯à¥‹à¤œà¤¨à¤¾ â€” à¤ªà¤¹à¤²à¥‡ à¤†à¤œà¤¼à¤®à¤¾à¤à¤‚",
            ru: "C.L.I.P 2: ÐŸÐ ÐžÐ•ÐšÐ¢ Ð˜Ð˜ â€” ÐŸÐžÐŸÐ ÐžÐ‘Ð£Ð™Ð¢Ð• ÐŸÐ•Ð Ð’Ð«Ðœ",
            fr: "C.L.I.P 2 : PROJET IA â€” ESSAYEZ EN PREMIER",
            de: "C.L.I.P 2: KI-PROJEKT â€” ZUERST AUSPROBIEREN",
            ja: "C.L.I.P 2: AIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ â€” ã¾ãšè©¦ã—ã¦ã¿ã‚‹",
            pt: "C.L.I.P 2: PROJETO DE IA â€” EXPERIMENTE PRIMEIRO",
            ar: "C.L.I.P 2: Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ â€” Ø¬Ø±Ø¨ Ø£ÙˆÙ„Ø§Ù‹",
            it: "C.L.I.P 2: PROGETTO IA â€” PROVA PER PRIMO",
            ko: "C.L.I.P 2: AI í”„ë¡œì íŠ¸ â€” ë¨¼ì € ì‹œë„í•´ë³´ì„¸ìš”"
        },
        url: "https://t.me/CLIP_Project_AI",
        imageSrc: "https://i.postimg.cc/kVHqDhzr/small-ad.png"
    },
    big: {
        text: {
            en: "Join the By ROlil Studio! More products and EVERYTHING that you wish are there!",
            es: "Â¡Ãšnete a By ROlil Studio! Â¡MÃ¡s productos y TODO lo que deseas estÃ¡n ahÃ­!",
            zh: "åŠ å…¥ By ROlil Studioï¼æ›´å¤šäº§å“å’Œä½ æƒ³è¦çš„ä¸€åˆ‡éƒ½åœ¨é‚£é‡Œï¼",
            hi: "By ROlil Studio à¤®à¥‡à¤‚ à¤¶à¤¾à¤®à¤¿à¤² à¤¹à¥‹à¤‚! à¤”à¤° à¤‰à¤¤à¥à¤ªà¤¾à¤¦ à¤”à¤° à¤†à¤ªà¤•à¥€ à¤¹à¤° à¤‡à¤šà¥à¤›à¤¾ à¤µà¤¹à¤¾à¤ à¤¹à¥ˆ!",
            ru: "ÐŸÑ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½ÑÐ¹Ñ‚ÐµÑÑŒ Ðº By ROlil Studio! Ð‘Ð¾Ð»ÑŒÑˆÐµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¾Ð² Ð¸ Ð’Ð¡Ð, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð¿Ð¾Ð¶ÐµÐ»Ð°ÐµÑ‚Ðµ, Ñ‚Ð°Ð¼!",
            fr: "Rejoignez By ROlil Studio ! Plus de produits et TOUT ce que vous dÃ©sirez sont lÃ  !",
            de: "Treten Sie By ROlil Studio bei! Mehr Produkte und ALLES, was Sie sich wÃ¼nschen, gibt es dort!",
            ja: "By ROlil Studioã«å‚åŠ ã—ã‚ˆã†ï¼ã•ã‚‰ã«å¤šãã®è£½å“ã¨ã‚ãªãŸãŒæœ›ã‚€ã™ã¹ã¦ãŒãã“ã«ï¼",
            pt: "Junte-se ao By ROlil Studio! Mais produtos e TUDO o que vocÃª deseja estÃ£o lÃ¡!",
            ar: "Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ By ROlil Studio! Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆÙƒÙ„ Ù…Ø§ ØªØªÙ…Ù†Ø§Ù‡ Ù…ÙˆØ¬ÙˆØ¯ Ù‡Ù†Ø§Ùƒ!",
            it: "Unisciti a By ROlil Studio! PiÃ¹ prodotti e TUTTO ciÃ² che desideri sono lÃ¬!",
            ko: "By ROlil Studioì— ê°€ìž…í•˜ì„¸ìš”! ë” ë§Žì€ ì œí’ˆê³¼ ì›í•˜ëŠ” ëª¨ë“  ê²ƒì´ ê±°ê¸°ì— ìžˆìŠµë‹ˆë‹¤!"
        },
        url: "https://t.me/By_RORlil",
        imageSrc: "https://i.postimg.cc/Vrb1tWPJ/big-ad.png"
    }
};

const translations = {
    en: {
        site_name: "AI Task Planner", title: "AI Task Planner", welcome: "Hello! I'm your AI task planner.",
        step_tasks: "Enter tasks separated by commas.", step_importances: "Specify importance (low, medium, high).",
        step_time: "Specify time (HH:MM - HH:MM).", step_save: "Enter plan name.", placeholder_tasks: "Prepare presentation, Reply to emails",
        placeholder_importances: "high, medium, low", placeholder_time: "09:00 - 17:00", placeholder_save: "My daily plan",
        continue: "Continue", back: "Back", skip: "Skip", done: "Save", success_message: "Plan created!",
        history_title: "Plan History", no_history: "No saved plans.", clear_history: "Clear History", tasks_label: "Tasks",
        importances_label: "Importances", time_label: "Time", schedule_label: "Schedule", advice_label: "Advice",
        task_count: "Tasks: {count}", error_tasks: "Enter at least one task.", error_importances: "Match importance count to tasks.",
        error_time: "Use HH:MM - HH:MM format.", error_save: "Enter a plan name.", error_processing: "Processing error.",
        loading: "Loading...", language_title: "Select Language", style_title: "Select Style", theme_title: "Toggle Theme",
        minimal: "Minimal ðŸŒŸ", retro: "Retro ðŸŽ‰", cosmic: "Cosmic ðŸŒŒ", cyberpunk: "Cyberpunk ðŸŒ€", industrial: "Industrial âš™ï¸",
        hologram: "Hologram ðŸŒˆ", steampunk: "Steampunk ðŸ•°ï¸", aurora: "Aurora ðŸŒ ", matrix: "Matrix ðŸ’¾", zen: "Zen ðŸŒ¿",
        cyberwave: "Cyberwave ðŸŒŠ", modern: "Modern ðŸ™ï¸",
        error_title: "Error", close: "Close", leave_warning: "You have unsaved changes in your plan. Are you sure you want to leave?",
        confirm: "Confirm", cancel: "Cancel"
    },
    es: {
        site_name: "Planificador de Tareas IA", title: "Planificador de Tareas IA", welcome: "Â¡Hola! Sou tu planificador de tareas IA.",
        step_tasks: "Ingresa tareas separadas por comas.", step_importances: "Especifica importancia (baja, media, alta).",
        step_time: "Especifica tiempo (HH:MM - HH:MM).", step_save: "Ingresa nombre del plan.", placeholder_tasks: "Preparar presentaciÃ³n, Responder correos",
        placeholder_importances: "alta, media, baja", placeholder_time: "09:00 - 17:00", placeholder_save: "Mi plan diario",
        continue: "Continuar", back: "AtrÃ¡s", skip: "Omitir", done: "Guardar", success_message: "Â¡Plan creado!",
        history_title: "Historial de Planes", no_history: "No hay planes guardados.", clear_history: "Borrar Historial",
        tasks_label: "Tareas", importances_label: "Importancias", time_label: "Tiempo", schedule_label: "Horario",
        advice_label: "Consejo", task_count: "Tareas: {count}", error_tasks: "Ingresa al menos una tarea.",
        error_importances: "Coincide el nÃºmero de importancias con las tareas.", error_time: "Usa el formato HH:MM - HH:MM.",
        error_save: "Ingresa un nombre de plan.", error_processing: "Error de procesamiento.", loading: "Cargando...",
        language_title: "Seleccionar Idioma", style_title: "Seleccionar Estilo", theme_title: "Cambiar Tema",
        minimal: "Minimalista ðŸŒŸ", retro: "Retro ðŸŽ‰", cosmic: "CÃ³smico ðŸŒŒ", cyberpunk: "Ciberpunk ðŸŒ€", industrial: "Industrial âš™ï¸",
        hologram: "Holograma ðŸŒˆ", steampunk: "Steampunk ðŸ•°ï¸", aurora: "Aurora ðŸŒ ", matrix: "Matrix ðŸ’¾", zen: "Zen ðŸŒ¿",
        cyberwave: "Ciberonda ðŸŒŠ", modern: "Moderno ðŸ™ï¸",
        error_title: "Error", close: "Cerrar", leave_warning: "Tienes cambios sin guardar en tu plan. Â¿EstÃ¡s seguro de que quieres salir?",
        confirm: "Confirmar", cancel: "Cancelar"
    },
    zh: {
        site_name: "äººå·¥æ™ºèƒ½ä»»åŠ¡è§„åˆ’å™¨", title: "äººå·¥æ™ºèƒ½ä»»åŠ¡è§„åˆ’å™¨", welcome: "ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIä»»åŠ¡è§„åˆ’å™¨ã€‚",
        step_tasks: "è¾“å…¥ä»¥é€—å·åˆ†éš”çš„ä»»åŠ¡ã€‚", step_importances: "æŒ‡å®šé‡è¦æ€§ï¼ˆä½Žã€ä¸­ã€é«˜ï¼‰ã€‚",
        step_time: "æŒ‡å®šæ—¶é—´ï¼ˆHH:MM - HH:MMï¼‰ã€‚", step_save: "è¾“å…¥è®¡åˆ’åç§°ã€‚", placeholder_tasks: "å‡†å¤‡æ¼”ç¤ºæ–‡ç¨¿ï¼Œå›žå¤é‚®ä»¶",
        placeholder_importances: "é«˜ã€ä¸­ã€ä½Ž", placeholder_time: "09:00 - 17:00", placeholder_save: "æˆ‘çš„æ¯æ—¥è®¡åˆ’",
        continue: "ç»§ç»­", back: "è¿”å›ž", skip: "è·³è¿‡", done: "ä¿å­˜", success_message: "è®¡åˆ’åˆ›å»ºæˆåŠŸï¼",
        history_title: "è®¡åˆ’åŽ†å²", no_history: "æ²¡æœ‰ä¿å­˜çš„è®¡åˆ’ã€‚", clear_history: "æ¸…é™¤åŽ†å²", tasks_label: "ä»»åŠ¡",
        importances_label: "é‡è¦æ€§", time_label: "æ—¶é—´", schedule_label: "æ—¥ç¨‹", advice_label: "å»ºè®®",
        task_count: "ä»»åŠ¡æ•°ï¼š{count}", error_tasks: "è‡³å°‘è¾“å…¥ä¸€ä¸ªä»»åŠ¡ã€‚", error_importances: "é‡è¦æ€§æ•°é‡éœ€ä¸Žä»»åŠ¡åŒ¹é…ã€‚",
        error_time: "ä½¿ç”¨HH:MM - HH:MMæ ¼å¼ã€‚", error_save: "è¾“å…¥è®¡åˆ’åç§°ã€‚", error_processing: "å¤„ç†é”™è¯¯ã€‚",
        loading: "åŠ è½½ä¸­...", language_title: "é€‰æ‹©è¯­è¨€", style_title: "é€‰æ‹©é£Žæ ¼", theme_title: "åˆ‡æ¢ä¸»é¢˜",
        minimal: "æžç®€ ðŸŒŸ", retro: "å¤å¤ ðŸŽ‰", cosmic: "å®‡å®™ ðŸŒŒ", cyberpunk: "èµ›åšæœ‹å…‹ ðŸŒ€", industrial: "å·¥ä¸š âš™ï¸",
        hologram: "å…¨æ¯ ðŸŒˆ", steampunk: "è’¸æ±½æœ‹å…‹ ðŸ•°ï¸", aurora: "æžå…‰ ðŸŒ ", matrix: "çŸ©é˜µ ðŸ’¾", zen: "ç¦… ðŸŒ¿",
        cyberwave: "èµ›åšæ³¢ ðŸŒŠ", modern: "çŽ°ä»£ ðŸ™ï¸",
        error_title: "é”™è¯¯", close: "å…³é—­", leave_warning: "ä½ çš„è®¡åˆ’ä¸­æœ‰æœªä¿å­˜çš„æ›´æ”¹ã€‚ä½ ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ",
        confirm: "ç¡®è®¤", cancel: "å–æ¶ˆ"
    },
    hi: {
        site_name: "à¤à¤†à¤ˆ à¤•à¤¾à¤°à¥à¤¯ à¤¯à¥‹à¤œà¤¨à¤¾à¤•à¤¾à¤°", title: "à¤à¤†à¤ˆ à¤•à¤¾à¤°à¥à¤¯ à¤¯à¥‹à¤œà¤¨à¤¾à¤•à¤¾à¤°", welcome: "à¤¨à¤®à¤¸à¥à¤¤à¥‡! à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¤¾ à¤à¤†à¤ˆ à¤•à¤¾à¤°à¥à¤¯ à¤¯à¥‹à¤œà¤¨à¤¾à¤•à¤¾à¤° à¤¹à¥‚à¤à¥¤",
        step_tasks: "à¤…à¤²à¥à¤ªà¤µà¤¿à¤°à¤¾à¤® à¤¸à¥‡ à¤…à¤²à¤— à¤•à¤¿à¤ à¤—à¤ à¤•à¤¾à¤°à¥à¤¯ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤", step_importances: "à¤®à¤¹à¤¤à¥à¤µ à¤¨à¤¿à¤°à¥à¤¦à¤¿à¤·à¥à¤Ÿ à¤•à¤°à¥‡à¤‚ (à¤¨à¤¿à¤®à¥à¤¨, à¤®à¤§à¥à¤¯à¤®, à¤‰à¤šà¥à¤š)à¥¤",
        step_time: "à¤¸à¤®à¤¯ à¤¨à¤¿à¤°à¥à¤¦à¤¿à¤·à¥à¤Ÿ à¤•à¤°à¥‡à¤‚ (HH:MM - HH:MM)à¥¤", step_save: "à¤¯à¥‹à¤œà¤¨à¤¾ à¤•à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤", placeholder_tasks: "à¤ªà¥à¤°à¤¸à¥à¤¤à¥à¤¤à¤¿ à¤¤à¥ˆà¤¯à¤¾à¤° à¤•à¤°à¥‡à¤‚, à¤ˆà¤®à¥‡à¤² à¤•à¤¾ à¤œà¤µà¤¾à¤¬ à¤¦à¥‡à¤‚",
        placeholder_importances: "à¤‰à¤šà¥à¤š, à¤®à¤§à¥à¤¯à¤®, à¤¨à¤¿à¤®à¥à¤¨", placeholder_time: "09:00 - 17:00", placeholder_save: "à¤®à¥‡à¤°à¤¾ à¤¦à¥ˆà¤¨à¤¿à¤• à¤¯à¥‹à¤œà¤¨à¤¾",
        continue: "à¤œà¤¾à¤°à¥€ à¤°à¤–à¥‡à¤‚", back: "à¤ªà¥€à¤›à¥‡", skip: "à¤›à¥‹à¤¡à¤¼à¥‡à¤‚", done: "à¤¸à¤¹à¥‡à¤œà¥‡à¤‚", success_message: "à¤¯à¥‹à¤œà¤¨à¤¾ à¤¬à¤¨à¤¾à¤ˆ à¤—à¤ˆ!",
        history_title: "à¤¯à¥‹à¤œà¤¨à¤¾ à¤‡à¤¤à¤¿à¤¹à¤¾à¤¸", no_history: "à¤•à¥‹à¤ˆ à¤¸à¤¹à¥‡à¤œà¥€ à¤—à¤ˆ à¤¯à¥‹à¤œà¤¨à¤¾ à¤¨à¤¹à¥€à¤‚à¥¤", clear_history: "à¤‡à¤¤à¤¿à¤¹à¤¾à¤¸ à¤¸à¤¾à¤« à¤•à¤°à¥‡à¤‚",
        tasks_label: "à¤•à¤¾à¤°à¥à¤¯", importances_label: "à¤®à¤¹à¤¤à¥à¤µ", time_label: "à¤¸à¤®à¤¯", schedule_label: "à¤•à¤¾à¤°à¥à¤¯à¤¸à¥‚à¤šà¥€",
        advice_label: "à¤¸à¤²à¤¾à¤¹", task_count: "à¤•à¤¾à¤°à¥à¤¯: {count}", error_tasks: "à¤•à¤® à¤¸à¥‡ à¤•à¤® à¤à¤• à¤•à¤¾à¤°à¥à¤¯ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤",
        error_importances: "à¤®à¤¹à¤¤à¥à¤µ à¤•à¥€ à¤¸à¤‚à¤–à¥à¤¯à¤¾ à¤•à¤¾à¤°à¥à¤¯à¥‹à¤‚ à¤¸à¥‡ à¤®à¥‡à¤² à¤–à¤¾à¤¨à¥€ à¤šà¤¾à¤¹à¤¿à¤à¥¤", error_time: "HH:MM - HH:MM à¤ªà¥à¤°à¤¾à¤°à¥‚à¤ª à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚à¥¤",
        error_save: "à¤¯à¥‹à¤œà¤¨à¤¾ à¤•à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤", error_processing: "à¤ªà¥à¤°à¤¸à¤‚à¤¸à¥à¤•à¤°à¤£ à¤¤à¥à¤°à¥à¤Ÿà¤¿à¥¤", loading: "à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",
        language_title: "à¤­à¤¾à¤·à¤¾ à¤šà¥à¤¨à¥‡à¤‚", style_title: "à¤¶à¥ˆà¤²à¥€ à¤šà¥à¤¨à¥‡à¤‚", theme_title: "à¤¥à¥€à¤® à¤¬à¤¦à¤²à¥‡à¤‚",
        minimal: "à¤¨à¥à¤¯à¥‚à¤¨à¤¤à¤® ðŸŒŸ", retro: "à¤°à¥‡à¤Ÿà¥à¤°à¥‹ ðŸŽ‰", cosmic: "à¤•à¥‰à¤¸à¥à¤®à¤¿à¤• ðŸŒŒ", cyberpunk: "à¤¸à¤¾à¤‡à¤¬à¤°à¤ªà¤‚à¤• ðŸŒ€", industrial: "à¤”à¤¦à¥à¤¯à¥‹à¤—à¤¿à¤• âš™ï¸",
        hologram: "à¤¹à¥‹à¤²à¥‹à¤—à¥à¤°à¤¾à¤® ðŸŒˆ", steampunk: "à¤¸à¥à¤Ÿà¥€à¤®à¤ªà¤‚à¤• ðŸ•°ï¸", aurora: "à¤‘à¤°à¥‹à¤°à¤¾ ðŸŒ ", matrix: "à¤®à¥ˆà¤Ÿà¥à¤°à¤¿à¤•à¥à¤¸ ðŸ’¾", zen: "à¤œà¤¼à¥‡à¤¨ ðŸŒ¿",
        cyberwave: "à¤¸à¤¾à¤‡à¤¬à¤°à¤µà¥‡à¤µ ðŸŒŠ", modern: "à¤†à¤§à¥à¤¨à¤¿à¤• ðŸ™ï¸",
        error_title: "à¤¤à¥à¤°à¥à¤Ÿà¤¿", close: "à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚", leave_warning: "à¤†à¤ªà¤•à¥‡ à¤¯à¥‹à¤œà¤¨à¤¾ à¤®à¥‡à¤‚ à¤¬à¤¿à¤¨à¤¾ à¤¸à¤¹à¥‡à¤œà¥‡ à¤¬à¤¦à¤²à¤¾à¤µ à¤¹à¥ˆà¤‚à¥¤ à¤•à¥à¤¯à¤¾ à¤†à¤ª à¤µà¤¾à¤•à¤ˆ à¤›à¥‹à¤¡à¤¼à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚?",
        confirm: "à¤ªà¥à¤·à¥à¤Ÿà¤¿ à¤•à¤°à¥‡à¤‚", cancel: "à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚"
    },
    ru: {
        site_name: "Ð˜Ð˜-ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð·Ð°Ð´Ð°Ñ‡", title: "Ð˜Ð˜-ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð·Ð°Ð´Ð°Ñ‡", welcome: "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ñ‚Ð²Ð¾Ð¹ Ð˜Ð˜-Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð·Ð°Ð´Ð°Ñ‡.",
        step_tasks: "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ð¿ÑÑ‚ÑƒÑŽ.", step_importances: "Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ (Ð½Ð¸Ð·ÐºÐ°Ñ, ÑÑ€ÐµÐ´Ð½ÑÑ, Ð²Ñ‹ÑÐ¾ÐºÐ°Ñ).",
        step_time: "Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ñ€ÐµÐ¼Ñ (Ð§Ð§:ÐœÐœ - Ð§Ð§:ÐœÐœ).", step_save: "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð»Ð°Ð½Ð°.", placeholder_tasks: "ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ, ÐžÑ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ Ð½Ð° Ð¿Ð¸ÑÑŒÐ¼Ð°",
        placeholder_importances: "Ð²Ñ‹ÑÐ¾ÐºÐ°Ñ, ÑÑ€ÐµÐ´Ð½ÑÑ, Ð½Ð¸Ð·ÐºÐ°Ñ", placeholder_time: "09:00 - 17:00", placeholder_save: "ÐœÐ¾Ð¹ Ð¿Ð»Ð°Ð½ Ð½Ð° Ð´ÐµÐ½ÑŒ",
        continue: "ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ", back: "ÐÐ°Ð·Ð°Ð´", skip: "ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ", done: "Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ", success_message: "ÐŸÐ»Ð°Ð½ ÑÐ¾Ð·Ð´Ð°Ð½!",
        history_title: "Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð»Ð°Ð½Ð¾Ð²", no_history: "ÐÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ð»Ð°Ð½Ð¾Ð².", clear_history: "ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ",
        tasks_label: "Ð—Ð°Ð´Ð°Ñ‡Ð¸", importances_label: "Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚Ð¸", time_label: "Ð’Ñ€ÐµÐ¼Ñ", schedule_label: "Ð Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",
        advice_label: "Ð¡Ð¾Ð²ÐµÑ‚", task_count: "Ð—Ð°Ð´Ð°Ñ‡: {count}", error_tasks: "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ð¾Ð´Ð½Ñƒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ.",
        error_importances: "ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð´Ð¾Ð»Ð¶Ð½Ð¾ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°Ñ‚ÑŒ Ñ Ð·Ð°Ð´Ð°Ñ‡Ð°Ð¼Ð¸.", error_time: "Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð§Ð§:ÐœÐœ - Ð§Ð§:ÐœÐœ.",
        error_save: "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð»Ð°Ð½Ð°.", error_processing: "ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸.", loading: "Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...",
        language_title: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ·Ñ‹Ðº", style_title: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÑ‚Ð¸Ð»ÑŒ", theme_title: "ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ñ‚ÐµÐ¼Ñƒ",
        minimal: "ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»Ð¸Ð·Ð¼ ðŸŒŸ", retro: "Ð ÐµÑ‚Ñ€Ð¾ ðŸŽ‰", cosmic: "ÐšÐ¾ÑÐ¼Ð¾Ñ ðŸŒŒ", cyberpunk: "ÐšÐ¸Ð±ÐµÑ€Ð¿Ð°Ð½Ðº ðŸŒ€", industrial: "Ð˜Ð½Ð´Ð°ÑÑ‚Ñ€Ð¸Ð°Ð» âš™ï¸",
        hologram: "Ð“Ð¾Ð»Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° ðŸŒˆ", steampunk: "Ð¡Ñ‚Ð¸Ð¼Ð¿Ð°Ð½Ðº ðŸ•°ï¸", aurora: "ÐÐ²Ñ€Ð¾Ñ€Ð° ðŸŒ ", matrix: "ÐœÐ°Ñ‚Ñ€Ð¸Ñ†Ð° ðŸ’¾", zen: "Ð”Ð·ÐµÐ½ ðŸŒ¿",
        cyberwave: "ÐšÐ¸Ð±ÐµÑ€Ð²Ð¾Ð»Ð½Ð° ðŸŒŠ", modern: "ÐœÐ¾Ð´ÐµÑ€Ð½ ðŸ™ï¸",
        error_title: "ÐžÑˆÐ¸Ð±ÐºÐ°", close: "Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ", leave_warning: "Ð’ Ð²Ð°ÑˆÐµÐ¼ Ð¿Ð»Ð°Ð½Ðµ ÐµÑÑ‚ÑŒ Ð½ÐµÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ. Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ¹Ñ‚Ð¸?",
        confirm: "ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ", cancel: "ÐžÑ‚Ð¼ÐµÐ½Ð°"
    },
    fr: {
        site_name: "Planificateur de TÃ¢ches IA", title: "Planificateur de TÃ¢ches IA", welcome: "Bonjour ! Je suis votre planificateur de tÃ¢ches IA.",
        step_tasks: "Entrez les tÃ¢ches sÃ©parÃ©es par des virgules.", step_importances: "SpÃ©cifiez l'importance (faible, moyenne, Ã©levÃ©e).",
        step_time: "SpÃ©cifiez l'heure (HH:MM - HH:MM).", step_save: "Entrez le nom du plan.", placeholder_tasks: "PrÃ©parer une prÃ©sentation, RÃ©pondre aux emails",
        placeholder_importances: "Ã©levÃ©e, moyenne, faible", placeholder_time: "09:00 - 17:00", placeholder_save: "Mon plan quotidien",
        continue: "Continuer", back: "Retour", skip: "Passer", done: "Sauvegarder", success_message: "Plan crÃ©Ã© !",
        history_title: "Historique des Plans", no_history: "Aucun plan sauvegardÃ©.", clear_history: "Effacer l'Historique",
        tasks_label: "TÃ¢ches", importances_label: "Importances", time_label: "Temps", schedule_label: "Emploi du temps",
        advice_label: "Conseil", task_count: "TÃ¢ches : {count}", error_tasks: "Entrez au moins une tÃ¢che.",
        error_importances: "Le nombre d'importances doit correspondre aux tÃ¢ches.", error_time: "Utilisez le format HH:MM - HH:MM.",
        error_save: "Entrez un nom de plan.", error_processing: "Erreur de traitement.", loading: "Chargement...",
        language_title: "SÃ©lectionner la Langue", style_title: "SÃ©lectionner le Style", theme_title: "Changer de ThÃ¨me",
        minimal: "Minimaliste ðŸŒŸ", retro: "RÃ©tro ðŸŽ‰", cosmic: "Cosmique ðŸŒŒ", cyberpunk: "Cyberpunk ðŸŒ€", industrial: "Industriel âš™ï¸",
        hologram: "Hologramme ðŸŒˆ", steampunk: "Steampunk ðŸ•°ï¸", aurora: "Aurore ðŸŒ ", matrix: "Matrice ðŸ’¾", zen: "Zen ðŸŒ¿",
        cyberwave: "Cyberonde ðŸŒŠ", modern: "Moderne ðŸ™ï¸",
        error_title: "Erreur", close: "Fermer", leave_warning: "Vous avez des modifications non enregistrÃ©es dans votre plan. ÃŠtes-vous sÃ»r de vouloir quitter ?",
        confirm: "Confirmer", cancel: "Annuler"
    },
    de: {
        site_name: "KI-Aufgabenplaner", title: "KI-Aufgabenplaner", welcome: "Hallo! Ich bin dein KI-Aufgabenplaner.",
        step_tasks: "Gib Aufgaben durch Kommas getrennt ein.", step_importances: "Gib die Wichtigkeit an (niedrig, mittel, hoch).",
        step_time: "Gib die Zeit an (HH:MM - HH:MM).", step_save: "Gib einen Namen fÃ¼r den Plan ein.", placeholder_tasks: "PrÃ¤sentation vorbereiten, E-Mails beantworten",
        placeholder_importances: "hoch, mittel, niedrig", placeholder_time: "09:00 - 17:00", placeholder_save: "Mein Tagesplan",
        continue: "Weiter", back: "ZurÃ¼ck", skip: "Ãœberspringen", done: "Speichern", success_message: "Plan erstellt!",
        history_title: "Planverlauf", no_history: "Keine gespeicherten PlÃ¤ne.", clear_history: "Verlauf lÃ¶schen",
        tasks_label: "Aufgaben", importances_label: "Wichtigkeiten", time_label: "Zeit", schedule_label: "Zeitplan",
        advice_label: "Rat", task_count: "Aufgaben: {count}", error_tasks: "Gib mindestens eine Aufgabe ein.",
        error_importances: "Die Anzahl der Wichtigkeiten muss mit den Aufgaben Ã¼bereinstimmen.", error_time: "Verwende das Format HH:MM - HH:MM.",
        error_save: "Gib einen Namen fÃ¼r den Plan ein.", error_processing: "Verarbeitungsfehler.", loading: "Laden...",
        language_title: "Sprache auswÃ¤hlen", style_title: "Stil auswÃ¤hlen", theme_title: "Thema wechseln",
        minimal: "Minimalistisch ðŸŒŸ", retro: "Retro ðŸŽ‰", cosmic: "Kosmisch ðŸŒŒ", cyberpunk: "Cyberpunk ðŸŒ€", industrial: "Industriell âš™ï¸",
        hologram: "Hologramm ðŸŒˆ", steampunk: "Steampunk ðŸ•°ï¸", aurora: "Aurora ðŸŒ ", matrix: "Matrix ðŸ’¾", zen: "Zen ðŸŒ¿",
        cyberwave: "Cyberwelle ðŸŒŠ", modern: "Modern ðŸ™ï¸",
        error_title: "Fehler", close: "SchlieÃŸen", leave_warning: "Sie haben ungespeicherte Ã„nderungen in Ihrem Plan. MÃ¶chten Sie wirklich verlassen?",
        confirm: "BestÃ¤tigen", cancel: "Abbrechen"
    },
    ja: {
        site_name: "AIã‚¿ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼", title: "AIã‚¿ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼", welcome: "ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯ã‚ãªãŸã®AIã‚¿ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã§ã™ã€‚",
        step_tasks: "ã‚«ãƒ³ãƒžã§åŒºåˆ‡ã‚‰ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", step_importances: "é‡è¦åº¦ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ï¼ˆä½Žã€ä¸­ã€é«˜ï¼‰ã€‚",
        step_time: "æ™‚é–“ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ï¼ˆHH:MM - HH:MMï¼‰ã€‚", step_save: "ãƒ—ãƒ©ãƒ³ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", placeholder_tasks: "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®æº–å‚™ã€ãƒ¡ãƒ¼ãƒ«ã®è¿”ä¿¡",
        placeholder_importances: "é«˜ã€ä¸­ã€ä½Ž", placeholder_time: "09:00 - 17:00", placeholder_save: "ç§ã®ãƒ‡ã‚¤ãƒªãƒ¼ãƒ—ãƒ©ãƒ³",
        continue: "ç¶šã‘ã‚‹", back: "æˆ»ã‚‹", skip: "ã‚¹ã‚­ãƒƒãƒ—", done: "ä¿å­˜", success_message: "ãƒ—ãƒ©ãƒ³ãŒä½œæˆã•ã‚Œã¾ã—ãŸï¼",
        history_title: "ãƒ—ãƒ©ãƒ³å±¥æ­´", no_history: "ä¿å­˜ã•ã‚ŒãŸãƒ—ãƒ©ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚", clear_history: "å±¥æ­´ã‚’ã‚¯ãƒªã‚¢",
        tasks_label: "ã‚¿ã‚¹ã‚¯", importances_label: "é‡è¦åº¦", time_label: "æ™‚é–“", schedule_label: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«",
        advice_label: "ã‚¢ãƒ‰ãƒã‚¤ã‚¹", task_count: "ã‚¿ã‚¹ã‚¯æ•°ï¼š{count}", error_tasks: "å°‘ãªãã¨ã‚‚1ã¤ã®ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
        error_importances: "é‡è¦åº¦ã®æ•°ã¯ã‚¿ã‚¹ã‚¯ã¨ä¸€è‡´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚", error_time: "HH:MM - HH:MMã®å½¢å¼ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚",
        error_save: "ãƒ—ãƒ©ãƒ³ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", error_processing: "å‡¦ç†ã‚¨ãƒ©ãƒ¼ã€‚", loading: "èª­ã¿è¾¼ã¿ä¸­...",
        language_title: "è¨€èªžã‚’é¸æŠž", style_title: "ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠž", theme_title: "ãƒ†ãƒ¼ãƒžã‚’åˆ‡ã‚Šæ›¿ãˆ",
        minimal: "ãƒŸãƒ‹ãƒžãƒ« ðŸŒŸ", retro: "ãƒ¬ãƒˆãƒ­ ðŸŽ‰", cosmic: "ã‚³ã‚ºãƒŸãƒƒã‚¯ ðŸŒŒ", cyberpunk: "ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯ ðŸŒ€", industrial: "ã‚¤ãƒ³ãƒ€ã‚¹ãƒˆãƒªã‚¢ãƒ« âš™ï¸",
        hologram: "ãƒ›ãƒ­ã‚°ãƒ©ãƒ  ðŸŒˆ", steampunk: "ã‚¹ãƒãƒ¼ãƒ ãƒ‘ãƒ³ã‚¯ ðŸ•°ï¸", aurora: "ã‚ªãƒ¼ãƒ­ãƒ© ðŸŒ ", matrix: "ãƒžãƒˆãƒªãƒƒã‚¯ã‚¹ ðŸ’¾", zen: "ç¦… ðŸŒ¿",
        cyberwave: "ã‚µã‚¤ãƒãƒ¼ã‚¦ã‚§ãƒ¼ãƒ– ðŸŒŠ", modern: "ãƒ¢ãƒ€ãƒ³ ðŸ™ï¸",
        error_title: "ã‚¨ãƒ©ãƒ¼", close: "é–‰ã˜ã‚‹", leave_warning: "ãƒ—ãƒ©ãƒ³ã«ä¿å­˜ã•ã‚Œã¦ã„ãªã„å¤‰æ›´ãŒã‚ã‚Šã¾ã™ã€‚æœ¬å½“ã«çµ‚äº†ã—ã¾ã™ã‹ï¼Ÿ",
        confirm: "ç¢ºèª", cancel: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«"
    },
    pt: {
        site_name: "Planejador de Tarefas IA", title: "Planejador de Tarefas IA", welcome: "OlÃ¡! Eu sou seu planejador de tarefas IA.",
        step_tasks: "Insira tarefas separadas por vÃ­rgulas.", step_importances: "Especifique a importÃ¢ncia (baixa, mÃ©dia, alta).",
        step_time: "Especifique o horÃ¡rio (HH:MM - HH:MM).", step_save: "Insira o nome do plano.", placeholder_tasks: "Preparar apresentaÃ§Ã£o, Responder e-mails",
        placeholder_importances: "alta, mÃ©dia, baixa", placeholder_time: "09:00 - 17:00", placeholder_save: "Meu plano diÃ¡rio",
        continue: "Continuar", back: "Voltar", skip: "Pular", done: "Salvar", success_message: "Plano criado!",
        history_title: "HistÃ³rico de Planos", no_history: "Nenhum plano salvo.", clear_history: "Limpar HistÃ³rico",
        tasks_label: "Tarefas", importances_label: "ImportÃ¢ncias", time_label: "HorÃ¡rio", schedule_label: "Cronograma",
        advice_label: "Conselho", task_count: "Tarefas: {count}", error_tasks: "Insira pelo menos uma tarefa.",
        error_importances: "O nÃºmero de importÃ¢ncias deve corresponder Ã s tarefas.", error_time: "Use o formato HH:MM - HH:MM.",
        error_save: "Insira um nome para o plano.", error_processing: "Erro de processamento.", loading: "Carregando...",
        language_title: "Selecionar Idioma", style_title: "Selecionar Estilo", theme_title: "Alternar Tema",
        minimal: "Minimalista ðŸŒŸ", retro: "RetrÃ´ ðŸŽ‰", cosmic: "CÃ³smico ðŸŒŒ", cyberpunk: "Ciberpunk ðŸŒ€", industrial: "Industrial âš™ï¸",
        hologram: "Holograma ðŸŒˆ", steampunk: "Steampunk ðŸ•°ï¸", aurora: "Aurora ðŸŒ ", matrix: "Matrix ðŸ’¾", zen: "Zen ðŸŒ¿",
        cyberwave: "Ciberonda ðŸŒŠ", modern: "Moderno ðŸ™ï¸",
        error_title: "Erro", close: "Fechar", leave_warning: "VocÃª tem alteraÃ§Ãµes nÃ£o salvas no seu plano. Tem certeza de que deseja sair?",
        confirm: "Confirmar", cancel: "Cancelar"
    },
    ar: {
        site_name: "Ù…Ø®Ø·Ø· Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ", title: "Ù…Ø®Ø·Ø· Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ", welcome: "Ù…Ø±Ø­Ø¨Ù‹Ø§! Ø£Ù†Ø§ Ù…Ø®Ø·Ø· Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ.",
        step_tasks: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„.", step_importances: "Ø­Ø¯Ø¯ Ø§Ù„Ø£Ù‡Ù…ÙŠØ© (Ù…Ù†Ø®ÙØ¶Ø©ØŒ Ù…ØªÙˆØ³Ø·Ø©ØŒ Ø¹Ø§Ù„ÙŠØ©).",
        step_time: "Ø­Ø¯Ø¯ Ø§Ù„ÙˆÙ‚Øª (HH:MM - HH:MM).", step_save: "Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø®Ø·Ø©.", placeholder_tasks: "Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠØŒ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
        placeholder_importances: "Ø¹Ø§Ù„ÙŠØ©ØŒ Ù…ØªÙˆØ³Ø·Ø©ØŒ Ù…Ù†Ø®ÙØ¶Ø©", placeholder_time: "09:00 - 17:00", placeholder_save: "Ø®Ø·ØªÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©",
        continue: "Ù…ØªØ§Ø¨Ø¹Ø©", back: "Ø±Ø¬ÙˆØ¹", skip: "ØªØ®Ø·ÙŠ", done: "Ø­ÙØ¸", success_message: "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø·Ø©!",
        history_title: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø·Ø·", no_history: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø·Ø· Ù…Ø­ÙÙˆØ¸Ø©.", clear_history: "Ù…Ø³Ø­ Ø§Ù„ØªØ§Ø±ÙŠØ®",
        tasks_label: "Ø§Ù„Ù…Ù‡Ø§Ù…", importances_label: "Ø§Ù„Ø£Ù‡Ù…ÙŠØ©", time_label: "Ø§Ù„ÙˆÙ‚Øª", schedule_label: "Ø§Ù„Ø¬Ø¯ÙˆÙ„",
        advice_label: "Ù†ØµÙŠØ­Ø©", task_count: "Ø§Ù„Ù…Ù‡Ø§Ù…: {count}", error_tasks: "Ø£Ø¯Ø®Ù„ Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.",
        error_importances: "ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ·Ø§Ø¨Ù‚ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‡Ù…ÙŠØ§Øª Ù…Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù….", error_time: "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ HH:MM - HH:MM.",
        error_save: "Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ù‹Ø§ Ù„Ù„Ø®Ø·Ø©.", error_processing: "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©.", loading: "Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...",
        language_title: "Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©", style_title: "Ø§Ø®ØªØ± Ø§Ù„Ø£Ø³Ù„ÙˆØ¨", theme_title: "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…",
        minimal: "Ø¨Ø³ÙŠØ· ðŸŒŸ", retro: "Ø±Ø¬Ø¹ÙŠ ðŸŽ‰", cosmic: "ÙƒÙˆÙ†ÙŠ ðŸŒŒ", cyberpunk: "Ø³Ø§ÙŠØ¨Ø±Ø¨Ø§Ù†Ùƒ ðŸŒ€", industrial: "ØµÙ†Ø§Ø¹ÙŠ âš™ï¸",
        hologram: "Ù‡ÙˆÙ„ÙˆØºØ±Ø§Ù… ðŸŒˆ", steampunk: "Ø³ØªÙŠÙ…Ø¨Ø§Ù†Ùƒ ðŸ•°ï¸", aurora: "Ø£ÙˆØ±ÙˆØ±Ø§ ðŸŒ ", matrix: "Ù…Ø§ØªØ±ÙŠÙƒØ³ ðŸ’¾", zen: "Ø²ÙÙ† ðŸŒ¿",
        cyberwave: "Ø³Ø§ÙŠØ¨Ø± ÙˆÙŠÙ ðŸŒŠ", modern: "Ø¹ØµØ±ÙŠ ðŸ™ï¸",
        error_title: "Ø®Ø·Ø£", close: "Ø¥ØºÙ„Ø§Ù‚", leave_warning: "Ù„Ø¯ÙŠÙƒ ØªØºÙŠÙŠØ±Ø§Øª ØºÙŠØ± Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ø®Ø·ØªÙƒ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©ØŸ",
        confirm: "ØªØ£ÙƒÙŠØ¯", cancel: "Ø¥Ù„ØºØ§Ø¡"
    },
    it: {
        site_name: "Pianificatore di Compiti IA", title: "Pianificatore di Compiti IA", welcome: "Ciao! Sono il tuo pianificatore di compiti IA.",
        step_tasks: "Inserisci i compiti separati da virgole.", step_importances: "Specifica l'importanza (bassa, media, alta).",
        step_time: "Specifica l'orario (HH:MM - HH:MM).", step_save: "Inserisci il nome del piano.", placeholder_tasks: "Preparare una presentazione, Rispondere alle email",
        placeholder_importances: "alta, media, bassa", placeholder_time: "09:00 - 17:00", placeholder_save: "Il mio piano giornaliero",
        continue: "Continua", back: "Indietro", skip: "Salta", done: "Salva", success_message: "Piano creato!",
        history_title: "Cronologia dei Piani", no_history: "Nessun piano salvato.", clear_history: "Cancella Cronologia",
        tasks_label: "Compiti", importances_label: "Importanza", time_label: "Orario", schedule_label: "Programma",
        advice_label: "Consiglio", task_count: "Compiti: {count}", error_tasks: "Inserisci almeno un compito.",
        error_importances: "Il numero di importanze deve corrispondere ai compiti.", error_time: "Usa il formato HH:MM - HH:MM.",
        error_save: "Inserisci un nome per il piano.", error_processing: "Errore di elaborazione.", loading: "Caricamento...",
        language_title: "Seleziona Lingua", style_title: "Seleziona Stile", theme_title: "Cambia Tema",
        minimal: "Minimalista ðŸŒŸ", retro: "RetrÃ² ðŸŽ‰", cosmic: "Cosmico ðŸŒŒ", cyberpunk: "Cyberpunk ðŸŒ€", industrial: "Industriale âš™ï¸",
        hologram: "Ologramma ðŸŒˆ", steampunk: "Steampunk ðŸ•°ï¸", aurora: "Aurora ðŸŒ ", matrix: "Matrix ðŸ’¾", zen: "Zen ðŸŒ¿",
        cyberwave: "Ciberonda ðŸŒŠ", modern: "Moderno ðŸ™ï¸",
        error_title: "Errore", close: "Chiudi", leave_warning: "Hai modifiche non salvate nel tuo piano. Sei sicuro di voler uscire?",
        confirm: "Conferma", cancel: "Annulla"
    },
    ko: {
        site_name: "AI ìž‘ì—… í”Œëž˜ë„ˆ", title: "AI ìž‘ì—… í”Œëž˜ë„ˆ", welcome: "ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ë‹¹ì‹ ì˜ AI ìž‘ì—… í”Œëž˜ë„ˆìž…ë‹ˆë‹¤.",
        step_tasks: "ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ìž‘ì—…ì„ ìž…ë ¥í•˜ì„¸ìš”.", step_importances: "ì¤‘ìš”ë„ë¥¼ ì§€ì •í•˜ì„¸ìš” (ë‚®ìŒ, ë³´í†µ, ë†’ìŒ).",
        step_time: "ì‹œê°„ì„ ì§€ì •í•˜ì„¸ìš” (HH:MM - HH:MM).", step_save: "ê³„íš ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”.", placeholder_tasks: "í”„ë ˆì  í…Œì´ì…˜ ì¤€ë¹„, ì´ë©”ì¼ ë‹µìž¥",
        placeholder_importances: "ë†’ìŒ, ë³´í†µ, ë‚®ìŒ", placeholder_time: "09:00 - 17:00", placeholder_save: "ë‚˜ì˜ ì¼ì¼ ê³„íš",
        continue: "ê³„ì†", back: "ë’¤ë¡œ", skip: "ê±´ë„ˆë›°ê¸°", done: "ì €ìž¥", success_message: "ê³„íšì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!",
        history_title: "ê³„íš ê¸°ë¡", no_history: "ì €ìž¥ëœ ê³„íšì´ ì—†ìŠµë‹ˆë‹¤.", clear_history: "ê¸°ë¡ ì§€ìš°ê¸°",
        tasks_label: "ìž‘ì—…", importances_label: "ì¤‘ìš”ë„", time_label: "ì‹œê°„", schedule_label: "ì¼ì •",
        advice_label: "ì¡°ì–¸", task_count: "ìž‘ì—…: {count}", error_tasks: "ìµœì†Œí•œ í•˜ë‚˜ì˜ ìž‘ì—…ì„ ìž…ë ¥í•˜ì„¸ìš”.",
        error_importances: "ì¤‘ìš”ë„ì˜ ìˆ˜ëŠ” ìž‘ì—…ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.", error_time: "HH:MM - HH:MM í˜•ì‹ì„ ì‚¬ìš©í•˜ì„¸ìš”.",
        error_save: "ê³„íš ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”.", error_processing: "ì²˜ë¦¬ ì˜¤ë¥˜.", loading: "ë¡œë”© ì¤‘...",
        language_title: "ì–¸ì–´ ì„ íƒ", style_title: "ìŠ¤íƒ€ì¼ ì„ íƒ", theme_title: "í…Œë§ˆ ì „í™˜",
        minimal: "ë¯¸ë‹ˆë©€ ðŸŒŸ", retro: "ë ˆíŠ¸ë¡œ ðŸŽ‰", cosmic: "ì½”ìŠ¤ë¯¹ ðŸŒŒ", cyberpunk: "ì‚¬ì´ë²„íŽ‘í¬ ðŸŒ€", industrial: "ì¸ë”ìŠ¤íŠ¸ë¦¬ì–¼ âš™ï¸",
        hologram: "í™€ë¡œê·¸ëž¨ ðŸŒˆ", steampunk: "ìŠ¤íŒ€íŽ‘í¬ ðŸ•°ï¸", aurora: "ì˜¤ë¡œë¼ ðŸŒ ", matrix: "ë§¤íŠ¸ë¦­ìŠ¤ ðŸ’¾", zen: "ì   ðŸŒ¿",
        cyberwave: "ì‚¬ì´ë²„ì›¨ì´ë¸Œ ðŸŒŠ", modern: "ëª¨ë˜ ðŸ™ï¸",
        error_title: "ì˜¤ë¥˜", close: "ë‹«ê¸°", leave_warning: "ê³„íšì— ì €ìž¥ë˜ì§€ ì•Šì€ ë³€ê²½ ì‚¬í•­ì´ ìžˆìŠµë‹ˆë‹¤. ì •ë§ë¡œ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?",
        confirm: "í™•ì¸", cancel: "ì·¨ì†Œ"
    }
};

const themeIcons = {
    minimal: 'ðŸŒŸ', retro: 'ðŸŽ‰', cosmic: 'ðŸŒŒ', cyberpunk: 'ðŸŒ€', industrial: 'âš™ï¸', hologram: 'ðŸŒˆ', steampunk: 'ðŸ•°ï¸',
    aurora: 'ðŸŒ ', matrix: 'ðŸ’¾', zen: 'ðŸŒ¿', cyberwave: 'ðŸŒŠ', modern: 'ðŸ™ï¸'
};

const toolbarIcons = {
    minimal: { lang: 'ðŸŒ', history: 'âŒ›', planner: 'ðŸ“‹', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸŽ¨' },
    retro: { lang: 'ðŸ“¡', history: 'ðŸ•°ï¸', planner: 'ðŸ“…', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸ–Œï¸' },
    cosmic: { lang: 'ðŸª', history: 'ðŸŒ ', planner: 'ðŸš€', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸŒŒ' },
    cyberpunk: { lang: 'LANG', history: 'HIST', planner: 'PLAN', theme: isDark => isDark ? 'LIGHT' : 'DARK', style: 'STYLE' },
    industrial: { lang: 'ðŸŒ', history: 'ðŸ› ï¸', planner: 'ðŸ­', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸ”©' },
    hologram: { lang: 'ðŸ”®', history: 'ðŸ’¿', planner: 'ðŸ“±', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'âœ¨' },
    steampunk: { lang: 'ðŸ§­', history: 'â³', planner: 'ðŸ“œ', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'âš™ï¸' },
    aurora: { lang: 'ðŸŒ', history: 'ðŸŒŒ', planner: 'ðŸŒ ', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸŒˆ' },
    matrix: { lang: 'ðŸ’¾', history: 'ðŸ“Ÿ', planner: 'âŒ¨ï¸', theme: isDark => isDark ? 'LIGHT' : 'DARK', style: 'ðŸ–¥ï¸' },
    zen: { lang: 'ðŸŒ¿', history: 'ðŸ•‰ï¸', planner: 'â˜¯ï¸', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸ§˜' },
    cyberwave: { lang: 'ðŸŒ', history: 'ðŸ“¡', planner: 'ðŸ“²', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸŒŠ' },
    modern: { lang: 'ðŸŒ', history: 'âŒ›', planner: 'ðŸ“‹', theme: isDark => isDark ? 'â˜€ï¸' : 'ðŸŒ™', style: 'ðŸŽ¨' }
};

let currentLang = localStorage.getItem('language') || 'en';
let userData = { step: 'tasks', tasks: [], importances: [], time: '', planName: '', result: '' };
let currentView = 'planner';
let history = JSON.parse(localStorage.getItem('plannerHistory') || '[]');
let currentStyle = localStorage.getItem('style') || 'minimal';
let isDarkMode = localStorage.getItem('isDarkMode') === 'true';
let activeHistoryIndex = null;

function sanitizeInput(input) {
    const div = document.createElement('div');
    div.textContent = input;
    return div.innerHTML;
}

function applyStyle(style, darkMode) {
    currentStyle = style;
    isDarkMode = darkMode;
    document.documentElement.className = `theme-${style}-${darkMode ? 'dark' : 'light'}`;
    localStorage.setItem('style', style);
    localStorage.setItem('isDarkMode', darkMode);
    updateButtonIcons();
    renderContent();
    setupAds();
    updateHighlight();
}

function updateButtonIcons() {
    const icons = toolbarIcons[currentStyle];
    document.getElementById('lang-btn').textContent = icons.lang;
    document.getElementById('history-btn').textContent = icons.history;
    document.getElementById('planner-btn').textContent = icons.planner;
    document.getElementById('theme-btn').textContent = typeof icons.theme === 'function' ? icons.theme(isDarkMode) : icons.theme;
    document.getElementById('style-btn').textContent = icons.style;
}

function updateHighlight() {
    const toolbar = document.getElementById('toolbar');
    const highlight = document.getElementById('highlight');
    const activeButton = toolbar.querySelector(`button[data-view="${currentView}"]`);
    if (activeButton) {
        const rect = activeButton.getBoundingClientRect();
        const toolbarRect = toolbar.getBoundingClientRect();
        highlight.style.width = `${rect.width}px`;
        highlight.style.height = `${rect.height}px`;
        highlight.style.left = `${rect.left - toolbarRect.left}px`;
        highlight.style.top = `${rect.top - toolbarRect.top}px`;
        highlight.style.opacity = '1';
    }
}

function showPlanner() { 
    currentView = 'planner'; 
    userData.step = 'tasks'; 
    document.getElementById('content-container').classList.remove('expanded');
    renderContent(); 
    updateHighlight(); 
}

function showLanguageMenu() { 
    currentView = 'language'; 
    document.getElementById('content-container').classList.add('expanded');
    renderContent(); 
    updateHighlight(); 
}

function showStyleMenu() { 
    currentView = 'style'; 
    document.getElementById('content-container').classList.add('expanded');
    renderContent(); 
    updateHighlight(); 
}

function showHistory() { 
    currentView = 'history'; 
    document.getElementById('content-container').classList.add('expanded');
    renderContent(); 
    updateHighlight(); 
}

function showTheme() { 
    currentView = 'theme'; 
    document.getElementById('content-container').classList.add('expanded');
    renderContent(); 
    updateHighlight(); 
}

function switchStyle(style) { 
    applyStyle(style, isDarkMode); 
    showPlanner(); 
}

function switchLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    document.getElementById('title').innerText = translations[lang].title;
    document.title = translations[lang].site_name;
    updateButtonIcons();
    setupAds();
    const contentDiv = document.getElementById('content');
    contentDiv.style.animation = 'languageSwitch 0.5s ease';
    setTimeout(() => contentDiv.style.animation = '', 500);
    showPlanner();
}

function toggleTheme() { 
    applyStyle(currentStyle, !isDarkMode); 
}

function setupAds() {
    const bigAd = document.getElementById('big-ad');
    const bigAdContent = adConfig.big.text[currentLang] ? `
        <img src="${adConfig.big.imageSrc}" alt="Big Ad" class="w-12 h-12 rounded object-cover" onerror="this.src='https://via.placeholder.com/48'; this.onerror=null;">
        <span class="text-gray-700">${adConfig.big.text[currentLang]}</span>
    ` : `<span class="text-gray-700">${translations[currentLang].no_ad || 'No ads!'}</span>`;
    bigAd.innerHTML = bigAdContent;
    bigAd.className = adConfig.big.text[currentLang] ? 'w-full max-w-md mt-4 bg-yellow-100 rounded-lg shadow p-4 flex items-center space-x-4 h-24 slide-in' : 'w-full max-w-md mt-4 bg-yellow-100 rounded-lg shadow p-4 flex items-center space-x-4 h-24 slide-in ad-empty';
    bigAd.onclick = adConfig.big.url ? () => window.open(adConfig.big.url, '_blank') : null;

    const smallAd = document.getElementById('small-ad');
    const smallAdContent = adConfig.small.text[currentLang] ? `
        <img src="${adConfig.small.imageSrc}" alt="Small Ad" class="w-8 h-8 rounded object-cover" onerror="this.src='https://via.placeholder.com/32'; this.onerror=null;">
        <span class="text-gray-700 text-sm">${adConfig.small.text[currentLang]}</span>
    ` : `<span class="text-gray-700 text-sm">${translations[currentLang].no_ad || 'No ads!'}</span>`;
    smallAd.innerHTML = smallAdContent;
    smallAd.className = adConfig.small.text[currentLang] ? 'w-full max-w-md mt-4 mb-4 bg-yellow-100 rounded-lg shadow p-4 flex items-center space-x-4 h-16 slide-in' : 'w-full max-w-md mt-4 mb-4 bg-yellow-100 rounded-lg shadow p-4 flex items-center space-x-4 h-16 slide-in ad-empty';
    smallAd.onclick = adConfig.small.url ? () => window.open(adConfig.small.url, '_blank') : null;
}

function showErrorModal(message) {
    const modalContainer = document.createElement('div');
    modalContainer.id = 'error-modal';
    modalContainer.className = 'fixed inset-0 flex items-center justify-center z-50';
    modalContainer.innerHTML = `
        <div class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"></div>
        <div class="relative bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full">
            <h3 class="text-lg font-semibold">${translations[currentLang].error_title}</h3>
            <p class="mt-2 text-gray-700 dark:text-gray-300">${message}</p>
            <button class="btn primary-btn mt-4 w-full" onclick="document.getElementById('error-modal').remove()">${translations[currentLang].close}</button>
        </div>
    `;
    document.body.appendChild(modalContainer);
}

function showLeaveWarningModal(callback) {
    const modalContainer = document.createElement('div');
    modalContainer.id = 'leave-warning-modal';
    modalContainer.className = 'fixed inset-0 flex items-center justify-center z-50';
    modalContainer.innerHTML = `
        <div class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"></div>
        <div class="relative bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-sm w-full">
            <h3 class="text-lg font-semibold">${translations[currentLang].error_title}</h3>
            <p class="mt-2 text-gray-700 dark:text-gray-300">${translations[currentLang].leave_warning}</p>
            <div class="mt-4 flex space-x-2">
                <button class="btn secondary-btn flex-1" onclick="document.getElementById('leave-warning-modal').remove()">${translations[currentLang].cancel}</button>
                <button class="btn primary-btn flex-1" onclick="document.getElementById('leave-warning-modal').remove(); ${callback}">${translations[currentLang].confirm}</button>
            </div>
        </div>
    `;
    document.body.appendChild(modalContainer);
}

function hasUnsavedChanges() {
    return userData.tasks.length > 0 || userData.importances.length > 0 || userData.time || userData.planName;
}

function clearHistory() {
    history = [];
    localStorage.setItem('plannerHistory', JSON.stringify(history));
    activeHistoryIndex = null;
    renderContent();
}

function goBack() {
    if (userData.step === 'importances') userData.step = 'tasks';
    else if (userData.step === 'time') userData.step = 'importances';
    else if (userData.step === 'save') userData.step = 'time';
    else if (userData.step === 'done') userData.step = 'save';
    renderContent();
}

function skipStep() {
    if (userData.step === 'importances') {
        userData.importances = userData.tasks.map(() => translations[currentLang].placeholder_importances.split(', ')[1]);
        userData.step = 'time';
    } else if (userData.step === 'time') {
        userData.time = translations[currentLang].placeholder_time;
        userData.step = 'save';
    } else if (userData.step === 'save') {
        userData.planName = translations[currentLang].placeholder_save;
        userData.step = 'done';
        submitData();
        return;
    }
    renderContent();
}

function submitData() {
    const errorDiv = document.getElementById('error');
    errorDiv.classList.add('hidden');

    if (userData.step === 'tasks') {
        const input = document.getElementById('tasks-input')?.value.trim();
        if (!input) {
            showErrorModal(translations[currentLang].error_tasks);
            return;
        }
        userData.tasks = input.split(',').map(task => sanitizeInput(task.trim())).filter(task => task);
        userData.step = 'importances';
    } else if (userData.step === 'importances') {
        const input = document.getElementById('importances-input')?.value.trim();
        if (input) {
            const importances = input.split(',').map(imp => sanitizeInput(imp.trim())).filter(imp => imp);
            if (importances.length !== userData.tasks.length) {
                showErrorModal(translations[currentLang].error_importances);
                return;
            }
            userData.importances = importances;
        }
        userData.step = 'time';
    } else if (userData.step === 'time') {
        const input = document.getElementById('time-input')?.value.trim();
        if (input && !/^\d{2}:\d{2}\s*-\s*\d{2}:\d{2}$/.test(input)) {
            showErrorModal(translations[currentLang].error_time);
            return;
        }
        userData.time = input || translations[currentLang].placeholder_time;
        userData.step = 'save';
    } else if (userData.step === 'save') {
        const input = document.getElementById('save-input')?.value.trim();
        if (!input) {
            showErrorModal(translations[currentLang].error_save);
            return;
        }
        userData.planName = sanitizeInput(input);
        userData.step = 'done';
        processPlan();
    }
    renderContent();
}

function processPlan() {
    document.getElementById('loading').classList.remove('hidden');
    setTimeout(() => {
        try {
            const priorityMap = {
                high: 3, alta: 3, é«˜: 3, à¤‰à¤šà¥à¤š: 3, Ð²Ñ‹ÑÐ¾ÐºÐ°Ñ: 3, Ã©levÃ©e: 3, hoch: 3, é«˜: 3, alta: 3, Ø¹Ø§Ù„ÙŠØ©: 3, alta: 3, ë†’ìŒ: 3,
                medium: 2, media: 2, ä¸­: 2, à¤®à¤§à¥à¤¯à¤®: 2, ÑÑ€ÐµÐ´Ð½ÑÑ: 2, moyenne: 2, mittel: 2, ä¸­: 2, mÃ©dia: 2, Ù…ØªÙˆØ³Ø·Ø©: 2, media: 2, ë³´í†µ: 2,
                low: 1, baja: 1, ä½Ž: 1, à¤¨à¤¿à¤®à¥à¤¨: 1, Ð½Ð¸Ð·ÐºÐ°Ñ: 1, faible: 1, niedrig: 1, ä½Ž: 1, baixa: 1, Ù…Ù†Ø®ÙØ¶Ø©: 1, bassa: 1, ë‚®ìŒ: 1
            };
            const tasksWithPriority = userData.tasks.map((task, i) => ({
                task,
                importance: userData.importances[i] || translations[currentLang].placeholder_importances.split(', ')[1],
                priority: priorityMap[(userData.importances[i] || translations[currentLang].placeholder_importances.split(', ')[1]).toLowerCase()] || 2
            }));
            tasksWithPriority.sort((a, b) => b.priority - a.priority);

            const [start, end] = userData.time.split('-').map(t => t.trim());
            const startTime = new Date(`2000-01-01 ${start}`);
            const endTime = new Date(`2000-01-01 ${end}`);
            if (isNaN(startTime) || isNaN(endTime)) throw new Error('Invalid time format');
            const totalMinutes = (endTime - startTime) / 1000 / 60;
            if (totalMinutes <= 0) throw new Error('End time must be after start time');
            const taskDuration = Math.floor(totalMinutes / tasksWithPriority.length);

            let currentTime = new Date(startTime);
            const schedule = tasksWithPriority.map(({ task, importance }) => {
                const taskStart = currentTime.toTimeString().slice(0, 5);
                currentTime.setMinutes(currentTime.getMinutes() + taskDuration);
                const taskEnd = currentTime.toTimeString().slice(0, 5);
                return `${taskStart}-${taskEnd}: ${task} (${importance})`;
            }).join('\n');

            const advice = `${translations[currentLang].advice_label}: Prioritize high-importance tasks early and review progress mid-day.`;
            userData.result = `${translations[currentLang].schedule_label}:\n${schedule}\n\n${advice}`;

            history.push({
                name: userData.planName,
                tasks: userData.tasks,
                importances: userData.importances,
                time: userData.time,
                result: userData.result,
                timestamp: new Date().toISOString()
            });
            localStorage.setItem('plannerHistory', JSON.stringify(history));

            triggerConfetti();
            document.getElementById('loading').classList.add('hidden');
            renderContent();
        } catch (error) {
            document.getElementById('loading').classList.add('hidden');
            showErrorModal(translations[currentLang].error_processing);
        }
    }, 1000);
}

function triggerConfetti() {
    const confettiContainer = document.getElementById('confetti-container');
    confettiContainer.innerHTML = '';
    const animation = currentStyle === 'minimal' ? 'confettiFall' : 
                     currentStyle === 'retro' ? 'retroBurst' : 
                     currentStyle === 'cosmic' ? 'cosmicExplosion' : 
                     currentStyle === 'cyberpunk' ? 'glitchBurst' :
                     currentStyle === 'industrial' ? 'industrialSpark' :
                     currentStyle === 'hologram' ? 'hologramPulse' :
                     currentStyle === 'steampunk' ? 'steampunkGearSpin' :
                     currentStyle === 'aurora' ? 'auroraWave' :
                     currentStyle === 'matrix' ? 'matrixRain' :
                     currentStyle === 'zen' ? 'zenBloom' :
                     currentStyle === 'cyberwave' ? 'cyberWave' :
                     'splashBurst';

    for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.animation = `${animation} 2s ease-in-out forwards`;
        confetti.style.animationDelay = `${Math.random() * 2}s`;
        confetti.style.background = `hsl(${Math.random() * 360}, 70%, 50%)`;
        confettiContainer.appendChild(confetti);
    }
    setTimeout(() => confettiContainer.innerHTML = '', 3000);
}

function toggleHistoryItem(index) {
    activeHistoryIndex = activeHistoryIndex === index ? null : index;
    renderContent();
}

function renderContent() {
    const contentDiv = document.getElementById('content');
    const actionButtons = document.getElementById('action-buttons');
    const title = document.getElementById('title');
    const errorDiv = document.getElementById('error');
    const loadingDiv = document.getElementById('loading');
    contentDiv.innerHTML = '';
    actionButtons.innerHTML = '';
    errorDiv.classList.add('hidden');
    loadingDiv.classList.add('hidden');

    const lang = translations[currentLang];
    title.innerText = currentView === 'planner' ? lang.title : 
                      currentView === 'history' ? lang.history_title : 
                      currentView === 'language' ? lang.language_title : 
                      currentView === 'style' ? lang.style_title : 
                      lang.theme_title;

    if (currentView === 'planner') {
        if (userData.step === 'tasks') {
            contentDiv.innerHTML = `<p class="mb-2">${lang.step_tasks}</p><input id="tasks-input" class="input-animate" placeholder="${lang.placeholder_tasks}" value="${userData.tasks.join(', ')}"><p class="text-sm mt-2">${lang.task_count.replace('{count}', userData.tasks.length)}</p>`;
            actionButtons.innerHTML = `<button class="btn primary-btn" onclick="submitData()">${lang.continue}</button>`;
        } else if (userData.step === 'importances') {
            contentDiv.innerHTML = `<p class="mb-2">${lang.step_importances}</p><input id="importances-input" class="input-animate" placeholder="${lang.placeholder_importances}" value="${userData.importances.join(', ')}"><p class="text-sm mt-2">${lang.task_count.replace('{count}', userData.tasks.length)}</p>`;
            actionButtons.innerHTML = `<button class="btn secondary-btn mr-2" onclick="goBack()">${lang.back}</button><button class="btn primary-btn" onclick="submitData()">${lang.continue}</button><button class="btn skip-btn ml-2" onclick="skipStep()">${lang.skip}</button>`;
        } else if (userData.step === 'time') {
            contentDiv.innerHTML = `<p class="mb-2">${lang.step_time}</p><input id="time-input" class="input-animate" placeholder="${lang.placeholder_time}" value="${userData.time}"><p class="text-sm mt-2">${lang.task_count.replace('{count}', userData.tasks.length)}</p>`;
            actionButtons.innerHTML = `<button class="btn secondary-btn mr-2" onclick="goBack()">${lang.back}</button><button class="btn primary-btn" onclick="submitData()">${lang.continue}</button><button class="btn skip-btn ml-2" onclick="skipStep()">${lang.skip}</button>`;
        } else if (userData.step === 'save') {
            contentDiv.innerHTML = `<p class="mb-2">${lang.step_save}</p><input id="save-input" class="input-animate" placeholder="${lang.placeholder_save}" value="${userData.planName}"><p class="text-sm mt-2">${lang.task_count.replace('{count}', userData.tasks.length)}</p>`;
            actionButtons.innerHTML = `<button class="btn secondary-btn mr-2" onclick="goBack()">${lang.back}</button><button class="btn primary-btn" onclick="submitData()">${lang.done}</button><button class="btn skip-btn ml-2" onclick="skipStep()">${lang.skip}</button>`;
        } else if (userData.step === 'done') {
            contentDiv.innerHTML = `<p class="mb-2 text-green-600">${lang.success_message}</p><div class="ai-response"><pre>${userData.result}</pre></div>`;
            actionButtons.innerHTML = `<button class="btn primary-btn" onclick="showPlanner()">${lang.continue}</button>`;
        }
    } else if (currentView === 'history') {
        if (history.length === 0) {
            contentDiv.innerHTML = `<p>${lang.no_history}</p>`;
        } else {
            contentDiv.innerHTML = history.map((plan, index) => `
                <div class="history-item ${activeHistoryIndex === index ? 'active' : ''}" onclick="toggleHistoryItem(${index})">
                    <h3 class="font-semibold">${plan.name}</h3>
                    <p class="text-sm text-gray-600">${new Date(plan.timestamp).toLocaleString()}</p>
                    ${activeHistoryIndex === index ? `
                        <div class="mt-2">
                            <p>${lang.tasks_label}: ${plan.tasks.join(', ')}</p>
                            <p>${lang.importances_label}: ${plan.importances.join(', ')}</p>
                            <p>${lang.time_label}: ${plan.time}</p>
                            <pre class="mt-2">${plan.result}</pre>
                        </div>
                    ` : ''}
                </div>
            `).join('');
            actionButtons.innerHTML = `<button class="btn primary-btn" onclick="clearHistory()">${lang.clear_history}</button>`;
        }
    } else if (currentView === 'language') {
        contentDiv.innerHTML = `
            <div class="grid grid-cols-2 gap-2">
                <button class="btn secondary-btn" onclick="switchLanguage('en')">ðŸ‡¬ðŸ‡§ English</button>
                <button class="btn secondary-btn" onclick="switchLanguage('es')">ðŸ‡ªðŸ‡¸ EspaÃ±ol</button>
                <button class="btn secondary-btn" onclick="switchLanguage('zh')">ðŸ‡¨ðŸ‡³ ä¸­æ–‡</button>
                <button class="btn secondary-btn" onclick="switchLanguage('hi')">ðŸ‡®ðŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
                <button class="btn secondary-btn" onclick="switchLanguage('ru')">ðŸ‡·ðŸ‡º Ð ÑƒÑÑÐºÐ¸Ð¹</button>
                <button class="btn secondary-btn" onclick="switchLanguage('fr')">ðŸ‡«ðŸ‡· FranÃ§ais</button>
                <button class="btn secondary-btn" onclick="switchLanguage('de')">ðŸ‡©ðŸ‡ª Deutsch</button>
                <button class="btn secondary-btn" onclick="switchLanguage('ja')">ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž</button>
                <button class="btn secondary-btn" onclick="switchLanguage('pt')">ðŸ‡µðŸ‡¹ PortuguÃªs</button>
                <button class="btn secondary-btn" onclick="switchLanguage('ar')">ðŸ‡¸ðŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                <button class="btn secondary-btn" onclick="switchLanguage('it')">ðŸ‡®ðŸ‡¹ Italiano</button>
                <button class="btn secondary-btn" onclick="switchLanguage('ko')">ðŸ‡°ðŸ‡· í•œêµ­ì–´</button>
            </div>
        `;
        actionButtons.innerHTML = `<button class="btn primary-btn" onclick="showPlanner()">${lang.back}</button>`;
    } else if (currentView === 'style') {
        contentDiv.innerHTML = `
            <div class="grid grid-cols-2 gap-2">
                ${Object.keys(themeIcons).map(theme => `
                    <button class="btn secondary-btn" onclick="switchStyle('${theme}')">${lang[theme]} ${themeIcons[theme]}</button>
                `).join('')}
            </div>
        `;
        actionButtons.innerHTML = `<button class="btn primary-btn" onclick="showPlanner()">${lang.back}</button>`;
    } else if (currentView === 'theme') {
        contentDiv.innerHTML = `
            <div class="flex flex-col items-center">
                <button class="btn secondary-btn mb-2" onclick="applyStyle('${currentStyle}', false)">Light Theme â˜€ï¸</button>
                <button class="btn secondary-btn" onclick="applyStyle('${currentStyle}', true)">Dark Theme ðŸŒ™</button>
            </div>
        `;
        actionButtons.innerHTML = `<button class="btn primary-btn" onclick="showPlanner()">${lang.back}</button>`;
    }
}

document.addEventListener('DOMContentLoaded', () => {
    applyStyle(currentStyle, isDarkMode);
    setupAds();
    renderContent();
    updateHighlight();

    // Add smooth transition to content-container
    const contentContainer = document.getElementById('content-container');
    contentContainer.style.transition = 'all 0.3s ease-in-out';

    // Prevent leaving the page with unsaved changes
    window.addEventListener('beforeunload', (event) => {
        if (hasUnsavedChanges() && userData.step !== 'done') {
            event.preventDefault();
            event.returnValue = translations[currentLang].leave_warning;
        }
    });

    // Intercept navigation attempts (e.g., clicking links or browser back)
    document.addEventListener('click', (event) => {
        const target = event.target.closest('a');
        if (target && target.href && hasUnsavedChanges() && userData.step !== 'done') {
            event.preventDefault();
            showLeaveWarningModal(`window.location.href = '${target.href}'`);
        }
    });

    // Handle browser back/forward navigation
    window.addEventListener('popstate', (event) => {
        if (hasUnsavedChanges() && userData.step !== 'done') {
            history.pushState(null, null, window.location.href);
            showLeaveWarningModal('history.back()');
        }
    });
});